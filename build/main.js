!function(){"use strict";var e="";const t={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-btn",inactiveButtonClass:"modal__submit-btn_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error"},r=(e,t,r)=>{e.querySelector(`#${t.id}-error`).textContent="",t.classList.remove(r.inputErrorClass)},n=(e,t,r)=>{(e=>e.some((e=>!e.validity.valid)))(e)?o(t,r):a(t,r)},o=(e,t)=>{e.disabled=!0,e.classList.add(t.inactiveButtonClass)},a=(e,t)=>{e.disabled=!1,e.classList.remove(t.inactiveButtonClass)};var s=e+"d3610e9c6dce3cb370d8.svg",c=e+"03fcfd6582f118f2d4fa.svg",l=e+"5d3f137969685e5485dd.svg",d=e+"dba18798529f242c4c6d.svg",i=e+"d73f076c46eb5467f5fc.svg";function u(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Save",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Saving...";e.textContent=t?n:r}document.getElementById("header__logo").src=s;const m=document.getElementById("profile__avatar");document.getElementById("profile__edit-btn-icon").src=c,document.getElementById("profile__add-btn-icon").src=l,document.getElementById("modal__close-btn-icon").src=d,document.getElementById("profile__avatar-btn-img").src=i,document.getElementById("modal__close-btn-icon-2").src=d,document.getElementById("modal__close-btn-icon-3").src=d;const _=new class{constructor(e){let{baseUrl:t,headers:r}=e;this._baseUrl=t,this._headers=r}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error ${e.status}: ${e.statusText}`)}getAppInfo(){return Promise.all([this.getInitialCards(),this.getUserInfo()])}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._checkResponse)}editUserInfo(e){let{name:t,about:r}=e;return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:r})}).then(this._checkResponse)}editUserAvatar(e){let{avatar:t}=e;return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})}).then(this._checkResponse)}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}changeLikeStatus(e,t){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:t?"DELETE":"PUT",headers:this._headers}).then(this._checkResponse)}editUserPost(e){let{name:t,link:r}=e;return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:r})}).then(this._checkResponse)}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then(this._checkResponse)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"9cb02ddb-be93-4f4d-acd7-bf55d0ac90f0","Content-Type":"application/json"}});_.getAppInfo().then((e=>{let[t,r]=e;t.forEach((e=>{const t=M(e);B.prepend(t)}));const{name:n,about:o,avatar:a}=r;v.textContent=n,b.textContent=o,m.src=a})).catch((e=>{console.log(e)}));const h=document.querySelector(".profile__edit-btn"),f=document.querySelector(".profile__add-btn"),v=document.querySelector(".profile__name"),b=document.querySelector(".profile__description"),p=document.querySelector("#edit-modal"),y=p.querySelector(".modal__form"),S=y.elements["profile-name-input"],E=y.elements["profile-description-input"],g=document.querySelector(".profile__avatar-btn"),k=document.querySelector("#add-card-modal"),q=k.querySelector(".modal__form"),L=q.elements["add-card-name-input"],C=q.elements["add-card-link-input"],U=k.querySelector(".modal__submit-btn"),I=document.querySelector("#card-template"),B=document.querySelector(".cards__list"),$=document.querySelector("#preview-modal"),x=$.querySelector(".modal__image"),A=$.querySelector(".modal__caption"),D=document.querySelector("#avatar-modal"),P=D.querySelector(".modal__form"),R=D.querySelector("#profile-avatar-input"),T=document.querySelector("#delete-modal"),w=T.querySelector(".modal__form"),N=T.querySelector(".modal__submit-btn_cancel");let O,j;function J(e){e.classList.add("modal_opened"),document.addEventListener("keydown",z)}function H(e){e.classList.remove("modal_opened"),document.removeEventListener("keydown",z)}function z(e){if("Escape"===e.key){const e=document.querySelector(".modal_opened");e&&H(e)}}function M(e){const t=I.content.querySelector(".card").cloneNode(!0),r=t.querySelector(".card__title"),n=t.querySelector(".card__image"),o=t.querySelector(".card__like-btn"),a=t.querySelector(".card__delete-btn");return r.textContent=e.name,n.alt=e.name,n.src=e.link,e.isLiked&&o.classList.add("card__like-btn_liked"),o.addEventListener("click",(t=>{!function(e,t){const r=e.target,n=r.classList.contains("card__like-btn_liked");_.changeLikeStatus(t,n).then((()=>{r.classList.toggle("card__like-btn_liked")})).catch((e=>{console.error("Error handling like:",e)}))}(t,e._id)})),a.addEventListener("click",(()=>{!function(e,t){O=e,j=t,J(T)}(t,e._id)})),n.addEventListener("click",(()=>{J($),x.src=e.link,x.alt=e.name,A.textContent=e.name})),t}var F;document.querySelectorAll(".modal__close-btn").forEach((e=>{const t=e.closest(".modal");e.addEventListener("click",(()=>H(t)))})),document.querySelectorAll(".modal").forEach((e=>{e.addEventListener("mousedown",(t=>{t.target.classList.contains("modal_opened")&&H(e)}))})),h.addEventListener("click",(()=>{var e,n;S.value=v.textContent,E.value=b.textContent,J(p),e=y,n=t,[S,E].forEach((t=>{r(e,t,n)}))})),f.addEventListener("click",(()=>{J(k)})),y.addEventListener("submit",(function(e){const t=e.submitter;u(t,!0),e.preventDefault(),_.editUserInfo({name:S.value,about:E.value}).then((e=>{v.textContent=e.name,b.textContent=e.about,H(p)})).catch(console.error).finally((()=>{u(t,!1)}))})),q.addEventListener("submit",(function(e){e.preventDefault();const r=e.submitter;u(r,!0);const n={name:L.value,link:C.value};_.editUserPost(n).then((e=>{const r=M(e);B.prepend(r),H(k),q.reset(),o(U,t)})).catch(console.error).finally((()=>{u(r,!1)}))})),g.addEventListener("click",(()=>{J(D)})),P.addEventListener("submit",(function(e){e.preventDefault();const t=e.submitter;u(t,!0),_.editUserAvatar({avatar:R.value}).then((e=>{m.src=e.avatar,H(D)})).catch(console.error).finally((()=>{u(t,!1)}))})),w.addEventListener("submit",(function(e){const t=e.submitter;u(t,!0,"Delete","Deleting..."),e.preventDefault(),_.deleteCard(j).then((()=>{O.remove(),H(T)})).catch(console.error).finally((()=>{u(t,!1,"Delete","Deleting...")}))})),N.addEventListener("click",(()=>{H(T)})),F=t,document.querySelectorAll(F.formSelector).forEach((e=>{((e,t)=>{const o=Array.from(e.querySelectorAll(t.inputSelector)),a=e.querySelector(t.submitButtonSelector);a?(n(o,a,t),o.forEach((s=>{s.addEventListener("input",(()=>{((e,t,n)=>{t.validity.valid?r(e,t,n):((e,t,r,n)=>{e.querySelector(`#${t.id}-error`).textContent=r,t.classList.add(n.inputErrorClass)})(e,t,t.validationMessage,n)})(e,s,t),n(o,a,t)}))}))):console.error("Submit button not found in form:",e)})(e,F)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TyxFQUFZa0osTUFBTUMsS0FBSzVKLEVBQU84SSxpQkFBaUI1SSxFQUFPUixnQkFDdERtSyxFQUFnQjdKLEVBQU9HLGNBQWNELEVBQU9QLHNCQUc3Q2tLLEdBTUxySixFQUFrQkMsRUFBV29KLEVBQWUzSixHQUc1Q08sRUFBVXdFLFNBQVM2RSxJQUNqQkEsRUFBYXRDLGlCQUFpQixTQUFTLEtBdERoQnVDLEVBQUMvSixFQUFRQyxFQUFTQyxLQUN0Q0QsRUFBUVksU0FBU0MsTUFHcEJmLEVBQWVDLEVBQVFDLEVBQVNDLEdBaEJiOEosRUFBQ2hLLEVBQVFDLEVBQVNnSyxFQUFVL0osS0FDOUJGLEVBQU9HLGNBQWMsSUFBSUYsRUFBUUcsWUFDekNDLFlBQWM0SixFQUN6QmhLLEVBQVFLLFVBQVVhLElBQUlqQixFQUFPTCxnQkFBZ0IsRUFXM0NtSyxDQUFlaEssRUFBUUMsRUFBU0EsRUFBUWlLLGtCQUFtQmhLLEVBRzdELEVBa0RJNkosQ0FBbUIvSixFQUFROEosRUFBYzVKLEdBQ3pDTSxFQUFrQkMsRUFBV29KLEVBQWUzSixFQUFPLEdBQ25ELEtBWkZ5RixRQUFROEMsTUFBTSxtQ0FBb0N6SSxFQWFsRCxFQU9BMEosQ0FBa0IxSixFQUFRRSxFQUFPLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9zY3JpcHRzL3ZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy91dGlscy9BcGkuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy91dGlscy9oZWxwZXJzLmpzIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7IiwiZXhwb3J0IGNvbnN0IHNldHRpbmdzID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX3N1Ym1pdC1idG5cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fc3VibWl0LWJ0bl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JcIixcbn07XG5cbi8vIFV0aWxpdHkgRnVuY3Rpb25zIGZvciBJbnB1dCBFcnJvciBIYW5kbGluZ1xuXG5jb25zdCBzaG93SW5wdXRFcnJvciA9IChmb3JtRWwsIGlucHV0RWwsIGVycm9yTXNnLCBjb25maWcpID0+IHtcbiAgY29uc3QgZXJyb3JNc2dFbCA9IGZvcm1FbC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xuICBlcnJvck1zZ0VsLnRleHRDb250ZW50ID0gZXJyb3JNc2c7XG4gIGlucHV0RWwuY2xhc3NMaXN0LmFkZChjb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbn07XG5cbmNvbnN0IGhpZGVJbnB1dEVycm9yID0gKGZvcm1FbCwgaW5wdXRFbCwgY29uZmlnKSA9PiB7XG4gIGNvbnN0IGVycm9yTXNnRWwgPSBmb3JtRWwucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcbiAgZXJyb3JNc2dFbC50ZXh0Q29udGVudCA9IFwiXCI7XG4gIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbn07XG5cbmNvbnN0IGNoZWNrSW5wdXRWYWxpZGl0eSA9IChmb3JtRWwsIGlucHV0RWwsIGNvbmZpZykgPT4ge1xuICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcbiAgICBzaG93SW5wdXRFcnJvcihmb3JtRWwsIGlucHV0RWwsIGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2UsIGNvbmZpZyk7XG4gIH0gZWxzZSB7XG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsLCBpbnB1dEVsLCBjb25maWcpO1xuICB9XG59O1xuXG4vLyBGb3JtIFZhbGlkYXRpb24gU3RhdGUgRnVuY3Rpb25zXG5jb25zdCBoYXNJbnZhbGlkSW5wdXQgPSAoaW5wdXRMaXN0KSA9PiB7XG4gIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXQpID0+ICFpbnB1dC52YWxpZGl0eS52YWxpZCk7XG59O1xuXG5jb25zdCB0b2dnbGVCdXR0b25TdGF0ZSA9IChpbnB1dExpc3QsIGJ1dHRvbkVsLCBjb25maWcpID0+IHtcbiAgaWYgKGhhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XG4gICAgZGlzYWJsZUJ1dHRvbihidXR0b25FbCwgY29uZmlnKTtcbiAgfSBlbHNlIHtcbiAgICBlbmFibGVCdXR0b24oYnV0dG9uRWwsIGNvbmZpZyk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBkaXNhYmxlQnV0dG9uID0gKGJ1dHRvbkVsLCBjb25maWcpID0+IHtcbiAgYnV0dG9uRWwuZGlzYWJsZWQgPSB0cnVlO1xuICBidXR0b25FbC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbn07XG5cbmNvbnN0IGVuYWJsZUJ1dHRvbiA9IChidXR0b25FbCwgY29uZmlnKSA9PiB7XG4gIGJ1dHRvbkVsLmRpc2FibGVkID0gZmFsc2U7XG4gIGJ1dHRvbkVsLmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xufTtcblxuLy8gUmVzZXQgRm9ybSBWYWxpZGF0aW9uXG5leHBvcnQgY29uc3QgcmVzZXRWYWxpZGF0aW9uID0gKGZvcm1FbCwgaW5wdXRMaXN0LCBjb25maWcpID0+IHtcbiAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsLCBpbnB1dCwgY29uZmlnKTtcbiAgfSk7XG59O1xuXG4vLyBFdmVudCBMaXN0ZW5lcnMgYW5kIEZvcm0gSW5pdGlhbGl6YXRpb25cbmNvbnN0IHNldEV2ZW50TGlzdGVuZXJzID0gKGZvcm1FbCwgY29uZmlnKSA9PiB7XG4gIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oZm9ybUVsLnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmlucHV0U2VsZWN0b3IpKTtcbiAgY29uc3QgYnV0dG9uRWxlbWVudCA9IGZvcm1FbC5xdWVyeVNlbGVjdG9yKGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG5cbiAgLy8gQ2hlY2sgaWYgYnV0dG9uRWxlbWVudCBleGlzdHNcbiAgaWYgKCFidXR0b25FbGVtZW50KSB7XG4gICAgY29uc29sZS5lcnJvcihcIlN1Ym1pdCBidXR0b24gbm90IGZvdW5kIGluIGZvcm06XCIsIGZvcm1FbCk7XG4gICAgcmV0dXJuOyAvLyBFeGl0IGVhcmx5IGlmIHRoZSBidXR0b24gaXNuJ3QgZm91bmRcbiAgfVxuXG4gIC8vIEluaXRpYWxpemUgYnV0dG9uIHN0YXRlIGJhc2VkIG9uIGlucHV0cycgdmFsaWRpdHlcbiAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBjb25maWcpO1xuXG4gIC8vIEFkZCBldmVudCBsaXN0ZW5lcnMgdG8gaW5wdXRzXG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgIGNoZWNrSW5wdXRWYWxpZGl0eShmb3JtRWwsIGlucHV0RWxlbWVudCwgY29uZmlnKTtcbiAgICAgIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgY29uZmlnKTtcbiAgICB9KTtcbiAgfSk7XG59O1xuXG4vLyBFbmFibGUgRm9ybSBWYWxpZGF0aW9uXG5leHBvcnQgY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChjb25maWcpID0+IHtcbiAgY29uc3QgZm9ybUxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtU2VsZWN0b3IpO1xuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWwpID0+IHtcbiAgICBzZXRFdmVudExpc3RlbmVycyhmb3JtRWwsIGNvbmZpZyk7XG4gIH0pO1xufTtcbiIsImNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XG4gICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XG4gIH1cblxuICBfY2hlY2tSZXNwb25zZShyZXMpIHtcbiAgICBpZiAocmVzLm9rKSB7XG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvciAke3Jlcy5zdGF0dXN9OiAke3Jlcy5zdGF0dXNUZXh0fWApO1xuICB9XG5cbiAgZ2V0QXBwSW5mbygpIHtcbiAgICAvL0NhbGwgZ2V0VXNlckluZm8gaW4gdGhpcyBhcnJheVxuICAgIHJldHVybiBQcm9taXNlLmFsbChbdGhpcy5nZXRJbml0aWFsQ2FyZHMoKSwgdGhpcy5nZXRVc2VySW5mbygpXSk7XG4gIH1cblxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgZWRpdFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIC8vIFNlbmQgdGhlIGRhdGEgaW4gdGhlIGJvZHkgYXMgYSBKU09OIHN0cmluZy5cbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgYWJvdXQsXG4gICAgICB9KSxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgZWRpdFVzZXJBdmF0YXIoeyBhdmF0YXIgfSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICAvLyBTZW5kIHRoZSBkYXRhIGluIHRoZSBib2R5IGFzIGEgSlNPTiBzdHJpbmcuXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGF2YXRhcixcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICBkZWxldGVDYXJkKGlkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7aWR9YCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgY2hhbmdlTGlrZVN0YXR1cyhpZCwgaXNMaWtlZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2lkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogaXNMaWtlZCA/IFwiREVMRVRFXCIgOiBcIlBVVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgZWRpdFVzZXJQb3N0KHsgbmFtZSwgbGluayB9KSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICAvLyBTZW5kIHRoZSBkYXRhIGluIHRoZSBib2R5IGFzIGEgSlNPTiBzdHJpbmcuXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGxpbmssXG4gICAgICB9KSxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEFwaTtcbiIsImV4cG9ydCBmdW5jdGlvbiBzZXRCdXR0b25UZXh0KFxuICBidXR0b24sXG4gIGlzTG9hZGluZyxcbiAgZGVmYXVsdFRleHQgPSBcIlNhdmVcIixcbiAgbG9hZGluZ1RleHQgPSBcIlNhdmluZy4uLlwiXG4pIHtcbiAgaWYgKGlzTG9hZGluZykge1xuICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IGxvYWRpbmdUZXh0O1xuICB9IGVsc2Uge1xuICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IGRlZmF1bHRUZXh0O1xuICB9XG59XG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuaW1wb3J0IHtcbiAgZGlzYWJsZUJ1dHRvbixcbiAgZW5hYmxlVmFsaWRhdGlvbixcbiAgcmVzZXRWYWxpZGF0aW9uLFxuICBzZXR0aW5ncyxcbn0gZnJvbSBcIi4uL3NjcmlwdHMvdmFsaWRhdGlvbi5qc1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vdXRpbHMvQXBpLmpzXCI7XG5pbXBvcnQgbG9nb0ljb24gZnJvbSBcIi4uL2ltYWdlcy9sb2dvLnN2Z1wiO1xuaW1wb3J0IGVkaXRQcm9maWxlSWNvbiBmcm9tIFwiLi4vaW1hZ2VzL3BlbmNpbC5zdmdcIjtcbmltcG9ydCBuZXdQb3N0SWNvbiBmcm9tIFwiLi4vaW1hZ2VzL3BsdXMuc3ZnXCI7XG5pbXBvcnQgZWRpdE1vZGFsQ2xvc2VJY29uIGZyb20gXCIuLi9pbWFnZXMvY2xvc2Uuc3ZnXCI7XG5pbXBvcnQgbmV3TW9kYWxDbG9zZUljb24gZnJvbSBcIi4uL2ltYWdlcy9jbG9zZS5zdmdcIjtcbmltcG9ydCBlZGl0QXZhdGFySWNvbiBmcm9tIFwiLi4vaW1hZ2VzL3BlbmNpbC1saWdodC5zdmdcIjtcbmltcG9ydCBhdmF0YXJNb2RhbENsb3NlSWNvbiBmcm9tIFwiLi4vaW1hZ2VzL2Nsb3NlLnN2Z1wiO1xuaW1wb3J0IHsgc2V0QnV0dG9uVGV4dCB9IGZyb20gXCIuLi91dGlscy9oZWxwZXJzLmpzXCI7XG5cbmNvbnN0IGxvZ29FbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJoZWFkZXJfX2xvZ29cIik7XG5sb2dvRWxlbWVudC5zcmMgPSBsb2dvSWNvbjtcblxuY29uc3QgYXZhdGFyRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvZmlsZV9fYXZhdGFyXCIpO1xuXG5jb25zdCBlZGl0UHJvZmlsZUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvZmlsZV9fZWRpdC1idG4taWNvblwiKTtcbmVkaXRQcm9maWxlQnV0dG9uLnNyYyA9IGVkaXRQcm9maWxlSWNvbjtcblxuY29uc3QgbmV3UG9zdEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvZmlsZV9fYWRkLWJ0bi1pY29uXCIpO1xubmV3UG9zdEJ1dHRvbi5zcmMgPSBuZXdQb3N0SWNvbjtcblxuY29uc3QgZWRpdFByb2ZpbGVNb2RhbENsb3NlQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXG4gIFwibW9kYWxfX2Nsb3NlLWJ0bi1pY29uXCJcbik7XG5lZGl0UHJvZmlsZU1vZGFsQ2xvc2VCdXR0b24uc3JjID0gZWRpdE1vZGFsQ2xvc2VJY29uO1xuXG5jb25zdCBlZGl0UHJvZmlsZUJ1dHRvbkxpZ2h0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXG4gIFwicHJvZmlsZV9fYXZhdGFyLWJ0bi1pbWdcIlxuKTtcbmVkaXRQcm9maWxlQnV0dG9uTGlnaHQuc3JjID0gZWRpdEF2YXRhckljb247XG5cbmNvbnN0IG5ld1Bvc3RNb2RhbENsb3NlQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXG4gIFwibW9kYWxfX2Nsb3NlLWJ0bi1pY29uLTJcIlxuKTtcbm5ld1Bvc3RNb2RhbENsb3NlQnV0dG9uLnNyYyA9IG5ld01vZGFsQ2xvc2VJY29uO1xuXG5jb25zdCBhdmF0YXJNb2RhbENsb3NlQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXG4gIFwibW9kYWxfX2Nsb3NlLWJ0bi1pY29uLTNcIlxuKTtcblxuYXZhdGFyTW9kYWxDbG9zZUJ1dHRvbi5zcmMgPSBhdmF0YXJNb2RhbENsb3NlSWNvbjtcblxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246IFwiOWNiMDJkZGItYmU5My00ZjRkLWFjZDctYmY1NWQwYWM5MGYwXCIsXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gIH0sXG59KTtcblxuYXBpXG4gIC5nZXRBcHBJbmZvKClcbiAgLnRoZW4oKFtjYXJkcywgdXNlcl0pID0+IHtcbiAgICBjYXJkcy5mb3JFYWNoKChjYXJkKSA9PiB7XG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGdldENhcmRFbGVtZW50KGNhcmQpO1xuICAgICAgY2FyZHNMaXN0LnByZXBlbmQoY2FyZEVsZW1lbnQpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgeyBuYW1lLCBhYm91dCwgYXZhdGFyIH0gPSB1c2VyO1xuICAgIHByb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICBkZXNjcmlwdGlvbk5hbWUudGV4dENvbnRlbnQgPSBhYm91dDtcbiAgICBhdmF0YXJFbGVtZW50LnNyYyA9IGF2YXRhcjtcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IHtcbiAgICBjb25zb2xlLmxvZyhlcnIpO1xuICB9KTtcblxuLy8gUHJvZmlsZSBTZWN0aW9uIERPTSBFbGVtZW50c1xuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnRuXCIpO1xuY29uc3QgcHJvZmlsZUFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ0blwiKTtcbmNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xuY29uc3QgZGVzY3JpcHRpb25OYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcblxuLy8gRWRpdCBQcm9maWxlIE1vZGFsIERPTSBFbGVtZW50c1xuY29uc3QgZWRpdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LW1vZGFsXCIpO1xuY29uc3QgZWRpdEZvcm0gPSBlZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbmNvbnN0IGVkaXRNb2RhbE5hbWVJbnB1dCA9IGVkaXRGb3JtLmVsZW1lbnRzW1wicHJvZmlsZS1uYW1lLWlucHV0XCJdO1xuY29uc3QgZWRpdE1vZGFsRGVzY3JpcHRpb25JbnB1dCA9XG4gIGVkaXRGb3JtLmVsZW1lbnRzW1wicHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiXTtcbmNvbnN0IGVkaXRBdmF0YXJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhci1idG5cIik7XG5cbi8vIEFkZCBDYXJkIE1vZGFsIERPTSBFbGVtZW50c1xuY29uc3QgY2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1tb2RhbFwiKTtcbmNvbnN0IGNhcmRGb3JtID0gY2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG5jb25zdCBjYXJkTmFtZUlucHV0ID0gY2FyZEZvcm0uZWxlbWVudHNbXCJhZGQtY2FyZC1uYW1lLWlucHV0XCJdO1xuY29uc3QgY2FyZExpbmtJbnB1dCA9IGNhcmRGb3JtLmVsZW1lbnRzW1wiYWRkLWNhcmQtbGluay1pbnB1dFwiXTtcbmNvbnN0IGNhcmRTdWJtaXRCdXR0b24gPSBjYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc3VibWl0LWJ0blwiKTtcblxuLy8gQ2FyZHMgU2VjdGlvbiBET00gRWxlbWVudHNcbmNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10ZW1wbGF0ZVwiKTtcbmNvbnN0IGNhcmRzTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XG5cbi8vIFByZXZpZXcgTW9kYWwgRE9NIEVsZW1lbnRzXG5jb25zdCBwcmV2aWV3TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByZXZpZXctbW9kYWxcIik7XG5jb25zdCBwcmV2aWV3TW9kYWxJbWFnZSA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcbmNvbnN0IHByZXZpZXdNb2RhbENhcHRpb24gPSBwcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2FwdGlvblwiKTtcblxuLy9BdmF0YXIgTW9kYWwgRE9NIEVsZW1lbnRzXG5jb25zdCBhdmF0YXJNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYXZhdGFyLW1vZGFsXCIpO1xuY29uc3QgYXZhdGFyRm9ybSA9IGF2YXRhck1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG5jb25zdCBhdmF0YXJJbnB1dCA9IGF2YXRhck1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1hdmF0YXItaW5wdXRcIik7XG5cbi8vRGVsZXRlIE1vZGFsIERPTSBFbGVtZW50c1xuY29uc3QgZGVsZXRlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2RlbGV0ZS1tb2RhbFwiKTtcbmNvbnN0IGRlbGV0ZUZvcm0gPSBkZWxldGVNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuY29uc3QgZGVsZXRlTW9kYWxDYW5jZWxCdXR0b24gPSBkZWxldGVNb2RhbC5xdWVyeVNlbGVjdG9yKFxuICBcIi5tb2RhbF9fc3VibWl0LWJ0bl9jYW5jZWxcIlxuKTtcblxuLy9EZWxldGUgQ2FyZCBWYXJpYWJsZXNcbmxldCBzZWxlY3RlZENhcmQsIHNlbGVjdGVkQ2FyZElkO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBPcGVuICYgQ2xvc2UgTW9kYWwgRnVuY3Rpb25zXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmZ1bmN0aW9uIG9wZW5Nb2RhbChtb2RhbCkge1xuICBtb2RhbC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBjbG9zZU1vZGFsT25Fc2NhcGUpO1xufVxuXG5mdW5jdGlvbiBjbG9zZU1vZGFsKG1vZGFsKSB7XG4gIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGNsb3NlTW9kYWxPbkVzY2FwZSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUxpa2UoZXZ0LCBpZCkge1xuICBjb25zdCBjYXJkTGlrZUJ0biA9IGV2dC50YXJnZXQ7XG4gIGNvbnN0IGlzTGlrZWQgPSBjYXJkTGlrZUJ0bi5jbGFzc0xpc3QuY29udGFpbnMoXCJjYXJkX19saWtlLWJ0bl9saWtlZFwiKTtcbiAgYXBpXG4gICAgLmNoYW5nZUxpa2VTdGF0dXMoaWQsIGlzTGlrZWQpXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgY2FyZExpa2VCdG4uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnRuX2xpa2VkXCIpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBoYW5kbGluZyBsaWtlOlwiLCBlcnIpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBjbG9zZU1vZGFsT25Fc2NhcGUoZXZ0KSB7XG4gIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgY29uc3Qgb3Blbk1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9vcGVuZWRcIik7XG4gICAgaWYgKG9wZW5Nb2RhbCkge1xuICAgICAgY2xvc2VNb2RhbChvcGVuTW9kYWwpO1xuICAgIH1cbiAgfVxufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBDYXJkIENyZWF0aW9uICYgRGVsZXRpb25cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZnVuY3Rpb24gZ2V0Q2FyZEVsZW1lbnQoZGF0YSkge1xuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmRUZW1wbGF0ZS5jb250ZW50XG4gICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxuICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gIGNvbnN0IGNhcmRUaXRsZSA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XG4gIGNvbnN0IGNhcmRJbWcgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICBjb25zdCBjYXJkTGlrZUJ0biA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idG5cIik7XG4gIGNvbnN0IGNhcmREZWxldGVCdG4gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idG5cIik7XG5cbiAgY2FyZFRpdGxlLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICBjYXJkSW1nLmFsdCA9IGRhdGEubmFtZTtcbiAgY2FyZEltZy5zcmMgPSBkYXRhLmxpbms7XG5cbiAgaWYgKGRhdGEuaXNMaWtlZCkge1xuICAgIGNhcmRMaWtlQnRuLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19saWtlLWJ0bl9saWtlZFwiKTtcbiAgfVxuXG4gIGNhcmRMaWtlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgaGFuZGxlTGlrZShldnQsIGRhdGEuX2lkKTtcbiAgfSk7XG5cbiAgY2FyZERlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGhhbmRsZURlbGV0ZUNhcmQoY2FyZEVsZW1lbnQsIGRhdGEuX2lkKTtcbiAgfSk7XG5cbiAgY2FyZEltZy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIG9wZW5Nb2RhbChwcmV2aWV3TW9kYWwpO1xuICAgIHByZXZpZXdNb2RhbEltYWdlLnNyYyA9IGRhdGEubGluaztcbiAgICBwcmV2aWV3TW9kYWxJbWFnZS5hbHQgPSBkYXRhLm5hbWU7XG4gICAgcHJldmlld01vZGFsQ2FwdGlvbi50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbiAgfSk7XG5cbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xufVxuXG5jb25zdCBjbG9zZUJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19jbG9zZS1idG5cIik7XG5jbG9zZUJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gIGNvbnN0IHBvcHVwID0gYnV0dG9uLmNsb3Nlc3QoXCIubW9kYWxcIik7XG4gIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gY2xvc2VNb2RhbChwb3B1cCkpO1xufSk7XG5cbmNvbnN0IHBvcHVwcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxcIik7XG5wb3B1cHMuZm9yRWFjaCgocG9wdXApID0+IHtcbiAgcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfb3BlbmVkXCIpKSB7XG4gICAgICBjbG9zZU1vZGFsKHBvcHVwKTtcbiAgICB9XG4gIH0pO1xufSk7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIE1vZGFsIEZvcm0gSGFuZGxlcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZnVuY3Rpb24gaGFuZGxlRWRpdEZvcm1TdWJtaXQoZXZ0KSB7XG4gIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGV2dC5zdWJtaXR0ZXI7XG4gIHNldEJ1dHRvblRleHQoc3VibWl0QnV0dG9uLCB0cnVlKTtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gIGFwaVxuICAgIC5lZGl0VXNlckluZm8oe1xuICAgICAgbmFtZTogZWRpdE1vZGFsTmFtZUlucHV0LnZhbHVlLFxuICAgICAgYWJvdXQ6IGVkaXRNb2RhbERlc2NyaXB0aW9uSW5wdXQudmFsdWUsXG4gICAgfSlcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gICAgICBkZXNjcmlwdGlvbk5hbWUudGV4dENvbnRlbnQgPSBkYXRhLmFib3V0O1xuICAgICAgY2xvc2VNb2RhbChlZGl0TW9kYWwpO1xuICAgIH0pXG4gICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgc2V0QnV0dG9uVGV4dChzdWJtaXRCdXR0b24sIGZhbHNlKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQWRkQ2FyZFN1Ym1pdChldnQpIHtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGV2dC5zdWJtaXR0ZXI7XG4gIHNldEJ1dHRvblRleHQoc3VibWl0QnV0dG9uLCB0cnVlKTtcbiAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7IG5hbWU6IGNhcmROYW1lSW5wdXQudmFsdWUsIGxpbms6IGNhcmRMaW5rSW5wdXQudmFsdWUgfTtcbiAgYXBpXG4gICAgLmVkaXRVc2VyUG9zdChpbnB1dFZhbHVlcylcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBnZXRDYXJkRWxlbWVudChkYXRhKTtcbiAgICAgIGNhcmRzTGlzdC5wcmVwZW5kKGNhcmRFbGVtZW50KTtcbiAgICAgIGNsb3NlTW9kYWwoY2FyZE1vZGFsKTtcbiAgICAgIGNhcmRGb3JtLnJlc2V0KCk7XG4gICAgICBkaXNhYmxlQnV0dG9uKGNhcmRTdWJtaXRCdXR0b24sIHNldHRpbmdzKTtcbiAgICB9KVxuICAgIC5jYXRjaChjb25zb2xlLmVycm9yKVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIHNldEJ1dHRvblRleHQoc3VibWl0QnV0dG9uLCBmYWxzZSk7XG4gICAgfSk7XG59XG5mdW5jdGlvbiBoYW5kbGVBdmF0YXJTdWJtaXQoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zdCBzdWJtaXRCdXR0b24gPSBldnQuc3VibWl0dGVyO1xuICBzZXRCdXR0b25UZXh0KHN1Ym1pdEJ1dHRvbiwgdHJ1ZSk7XG4gIGFwaVxuICAgIC5lZGl0VXNlckF2YXRhcih7XG4gICAgICBhdmF0YXI6IGF2YXRhcklucHV0LnZhbHVlLFxuICAgIH0pXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIGF2YXRhckVsZW1lbnQuc3JjID0gZGF0YS5hdmF0YXI7XG4gICAgICBjbG9zZU1vZGFsKGF2YXRhck1vZGFsKTtcbiAgICB9KVxuICAgIC5jYXRjaChjb25zb2xlLmVycm9yKVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIHNldEJ1dHRvblRleHQoc3VibWl0QnV0dG9uLCBmYWxzZSk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZVN1Ym1pdChldnQpIHtcbiAgY29uc3QgZGVsZXRlQnV0dG9uID0gZXZ0LnN1Ym1pdHRlcjtcbiAgc2V0QnV0dG9uVGV4dChkZWxldGVCdXR0b24sIHRydWUsIFwiRGVsZXRlXCIsIFwiRGVsZXRpbmcuLi5cIik7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICBhcGlcbiAgICAuZGVsZXRlQ2FyZChzZWxlY3RlZENhcmRJZClcbiAgICAudGhlbigoKSA9PiB7XG4gICAgICBzZWxlY3RlZENhcmQucmVtb3ZlKCk7XG4gICAgICBjbG9zZU1vZGFsKGRlbGV0ZU1vZGFsKTtcbiAgICB9KVxuICAgIC5jYXRjaChjb25zb2xlLmVycm9yKVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIHNldEJ1dHRvblRleHQoZGVsZXRlQnV0dG9uLCBmYWxzZSwgXCJEZWxldGVcIiwgXCJEZWxldGluZy4uLlwiKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlRGVsZXRlQ2FyZChjYXJkRWxlbWVudCwgY2FyZElkKSB7XG4gIHNlbGVjdGVkQ2FyZCA9IGNhcmRFbGVtZW50O1xuICBzZWxlY3RlZENhcmRJZCA9IGNhcmRJZDtcbiAgb3Blbk1vZGFsKGRlbGV0ZU1vZGFsKTtcbn1cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gRXZlbnQgTGlzdGVuZXJzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGVkaXRNb2RhbE5hbWVJbnB1dC52YWx1ZSA9IHByb2ZpbGVOYW1lLnRleHRDb250ZW50O1xuICBlZGl0TW9kYWxEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gZGVzY3JpcHRpb25OYW1lLnRleHRDb250ZW50O1xuICBvcGVuTW9kYWwoZWRpdE1vZGFsKTtcbiAgcmVzZXRWYWxpZGF0aW9uKFxuICAgIGVkaXRGb3JtLFxuICAgIFtlZGl0TW9kYWxOYW1lSW5wdXQsIGVkaXRNb2RhbERlc2NyaXB0aW9uSW5wdXRdLFxuICAgIHNldHRpbmdzXG4gICk7XG59KTtcblxucHJvZmlsZUFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBvcGVuTW9kYWwoY2FyZE1vZGFsKTtcbn0pO1xuXG5lZGl0Rm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZUVkaXRGb3JtU3VibWl0KTtcbmNhcmRGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlQWRkQ2FyZFN1Ym1pdCk7XG5cbmVkaXRBdmF0YXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgb3Blbk1vZGFsKGF2YXRhck1vZGFsKTtcbn0pO1xuXG5hdmF0YXJGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlQXZhdGFyU3VibWl0KTtcblxuZGVsZXRlRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZURlbGV0ZVN1Ym1pdCk7XG5cbmRlbGV0ZU1vZGFsQ2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNsb3NlTW9kYWwoZGVsZXRlTW9kYWwpO1xufSk7XG5cbmVuYWJsZVZhbGlkYXRpb24oc2V0dGluZ3MpO1xuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJzZXR0aW5ncyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiaGlkZUlucHV0RXJyb3IiLCJmb3JtRWwiLCJpbnB1dEVsIiwiY29uZmlnIiwicXVlcnlTZWxlY3RvciIsImlkIiwidGV4dENvbnRlbnQiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsImlucHV0TGlzdCIsImJ1dHRvbkVsIiwic29tZSIsImlucHV0IiwidmFsaWRpdHkiLCJ2YWxpZCIsImhhc0ludmFsaWRJbnB1dCIsImRpc2FibGVCdXR0b24iLCJlbmFibGVCdXR0b24iLCJkaXNhYmxlZCIsImFkZCIsInNldEJ1dHRvblRleHQiLCJidXR0b24iLCJpc0xvYWRpbmciLCJkZWZhdWx0VGV4dCIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsImxvYWRpbmdUZXh0IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInNyYyIsImxvZ29JY29uIiwiYXZhdGFyRWxlbWVudCIsImVkaXRQcm9maWxlSWNvbiIsIm5ld1Bvc3RJY29uIiwiZWRpdE1vZGFsQ2xvc2VJY29uIiwiZWRpdEF2YXRhckljb24iLCJuZXdNb2RhbENsb3NlSWNvbiIsImF2YXRhck1vZGFsQ2xvc2VJY29uIiwiYXBpIiwiY29uc3RydWN0b3IiLCJfcmVmIiwiYmFzZVVybCIsImhlYWRlcnMiLCJ0aGlzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsIl9jaGVja1Jlc3BvbnNlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsInN0YXR1c1RleHQiLCJnZXRBcHBJbmZvIiwiYWxsIiwiZ2V0SW5pdGlhbENhcmRzIiwiZ2V0VXNlckluZm8iLCJmZXRjaCIsInRoZW4iLCJlZGl0VXNlckluZm8iLCJfcmVmMiIsIm5hbWUiLCJhYm91dCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiZWRpdFVzZXJBdmF0YXIiLCJfcmVmMyIsImF2YXRhciIsImRlbGV0ZUNhcmQiLCJjaGFuZ2VMaWtlU3RhdHVzIiwiaXNMaWtlZCIsImVkaXRVc2VyUG9zdCIsIl9yZWY0IiwibGluayIsImF1dGhvcml6YXRpb24iLCJjYXJkcyIsInVzZXIiLCJmb3JFYWNoIiwiY2FyZCIsImNhcmRFbGVtZW50IiwiZ2V0Q2FyZEVsZW1lbnQiLCJjYXJkc0xpc3QiLCJwcmVwZW5kIiwicHJvZmlsZU5hbWUiLCJkZXNjcmlwdGlvbk5hbWUiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJwcm9maWxlRWRpdEJ1dHRvbiIsInByb2ZpbGVBZGRCdXR0b24iLCJlZGl0TW9kYWwiLCJlZGl0Rm9ybSIsImVkaXRNb2RhbE5hbWVJbnB1dCIsImVsZW1lbnRzIiwiZWRpdE1vZGFsRGVzY3JpcHRpb25JbnB1dCIsImVkaXRBdmF0YXJCdXR0b24iLCJjYXJkTW9kYWwiLCJjYXJkRm9ybSIsImNhcmROYW1lSW5wdXQiLCJjYXJkTGlua0lucHV0IiwiY2FyZFN1Ym1pdEJ1dHRvbiIsImNhcmRUZW1wbGF0ZSIsInByZXZpZXdNb2RhbCIsInByZXZpZXdNb2RhbEltYWdlIiwicHJldmlld01vZGFsQ2FwdGlvbiIsImF2YXRhck1vZGFsIiwiYXZhdGFyRm9ybSIsImF2YXRhcklucHV0IiwiZGVsZXRlTW9kYWwiLCJkZWxldGVGb3JtIiwiZGVsZXRlTW9kYWxDYW5jZWxCdXR0b24iLCJzZWxlY3RlZENhcmQiLCJzZWxlY3RlZENhcmRJZCIsIm9wZW5Nb2RhbCIsIm1vZGFsIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsb3NlTW9kYWxPbkVzY2FwZSIsImNsb3NlTW9kYWwiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0Iiwia2V5IiwiZGF0YSIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJjYXJkVGl0bGUiLCJjYXJkSW1nIiwiY2FyZExpa2VCdG4iLCJjYXJkRGVsZXRlQnRuIiwiYWx0IiwidGFyZ2V0IiwiY29udGFpbnMiLCJ0b2dnbGUiLCJlcnJvciIsImhhbmRsZUxpa2UiLCJfaWQiLCJjYXJkSWQiLCJoYW5kbGVEZWxldGVDYXJkIiwicXVlcnlTZWxlY3RvckFsbCIsInBvcHVwIiwiY2xvc2VzdCIsInJlc2V0VmFsaWRhdGlvbiIsInZhbHVlIiwic3VibWl0QnV0dG9uIiwic3VibWl0dGVyIiwicHJldmVudERlZmF1bHQiLCJmaW5hbGx5IiwiaW5wdXRWYWx1ZXMiLCJyZXNldCIsImRlbGV0ZUJ1dHRvbiIsInNldEV2ZW50TGlzdGVuZXJzIiwiQXJyYXkiLCJmcm9tIiwiYnV0dG9uRWxlbWVudCIsImlucHV0RWxlbWVudCIsImNoZWNrSW5wdXRWYWxpZGl0eSIsInNob3dJbnB1dEVycm9yIiwiZXJyb3JNc2ciLCJ2YWxpZGF0aW9uTWVzc2FnZSJdLCJzb3VyY2VSb290IjoiIn0=